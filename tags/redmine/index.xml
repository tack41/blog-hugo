<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>redmine on tack41&#39;s blog</title>
    <link>https://blog.tack41.net/tags/redmine/</link>
    <description>Recent content in redmine on tack41&#39;s blog</description>
    <image>
      <url>https://blog.tack41.net/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E</url>
      <link>https://blog.tack41.net/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E</link>
    </image>
    <generator>Hugo -- gohugo.io</generator>
    <lastBuildDate>Fri, 01 Apr 2022 00:00:00 +0900</lastBuildDate><atom:link href="https://blog.tack41.net/tags/redmine/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>RedmineのDBをPostgreSQLからMariaDBに移行</title>
      <link>https://blog.tack41.net/posts/2022/04/01_01/</link>
      <pubDate>Fri, 01 Apr 2022 00:00:00 +0900</pubDate>
      
      <guid>https://blog.tack41.net/posts/2022/04/01_01/</guid>
      <description>TL;DR Redmine 4.2.5にて、yaml_dbを利用することでPostgreSQL(14.2)からMariaDB(10.4.24)に移行できました 経緯 GCPのVMの無料枠(e2-small,Mem:1GB,HDD:30GB)で以下のDockerコンテナクラスタ(docker-compose)でredmineを運用しています。
redmine: 4.2.5-alpihne postgres: 14.2-alpine steveltn/https-portal: 1.21.1 環境が激poorなこともありますが、たまにアクセスするとページが表示されるまで10秒近く待たされることも。そこで、より軽量と思われるMySQL系のMariaDB(10.4.24)に移行しました。パフォーマンスが改善されたかどうかは、現在様子見です。
以下の手順を踏みました。
コンテナクラスタを停止 docker-compose.ymlにMariaDBコンテナを追加し、redmineコンテナから接続できるようnetwork設定し、rootた上で起動 docker-compose execコマンドでredmineコンテナに接続 apk-add mariadb-clientを実行してクライアントツールをインストール /usr/src/redmine/config/database.ymlのバックアップを取得した上で、記述をMariaDBに接続できるよう(adapterはmysql2) mysqlコマンドでMariaDBコンテナに接続し、Install Redmineの手順を参考にDBを作成 Install Redmine](https://www.redmine.org/projects/redmine/wiki/redmineinstall)の手順を参考にrake db:migrateでDBを初期化 /usr/src/redmine/Gemfileにgem &amp;quot;yaml_db&amp;quot;の記述を追加してgem bundle updateを実行。エラーとなるが、途中yaml_dbのインストールが成功していればOK /usr/src/redmine/config/database.ymlを更にバックアップした上で、前にバックアップしていたPostgreSQL用の設定に戻してRAILS_ENV=production bundle exec rake db:data:dumpを実行。/usr/src/redmine/db/data.ymlにバックアップが作成される /usr/src/redmine/config/database.ymlをMariaDBの設定に戻し、RAILS_ENV=production bundle exec rake db:data:loadを実行。 mysqlコマンドでMariaDBコンテナに接続し、データがリストアされていることを確認 docker-compose.ymlのPostgreSQLコンテナの記述を削除し、redmineコンテナからMariaDBコンテナに接続するよう設定を修正した上で起動。 参考サイト: https://hnron.hatenablog.com/entry/2015/08/18/012738</description>
    </item>
    
    <item>
      <title>CentOS 7のRedmine 4.0でrmagick build error.</title>
      <link>https://blog.tack41.net/posts/2019/02/18_01/</link>
      <pubDate>Mon, 18 Feb 2019 00:00:00 +0900</pubDate>
      
      <guid>https://blog.tack41.net/posts/2019/02/18_01/</guid>
      <description>CentOS7のDockerコンテナにてRedmineを構築中にrmagick buildにてエラー発生。 先週は動作したのだが&amp;hellip;
ログを見ると、rmagickのバージョンは3.0.0で要求するImageMagickは6.8.9以上。インストールされているのは6.7.8Q16のためエラーとなっている。
このrmagick3.0.0は2月16日にリリースされたばかりらしい。その際に要求するImageMagickのバージョンが上がったのだろう。
https://rubygems.org/gems/rmagick/
CentOSのリポジトリでは最新でも6.7しかない。remiリポジトリにあるようなのでインストールしたところ、buildエラーがなくなった。
rpm -ivh http://rpms.famillecollet.com/enterprise/remi-release-7.rpm yum -y install ImageMagick6 ImageMagick6-devel --enablerepo=remi </description>
    </item>
    
    <item>
      <title>redmineのwikiにおけるhtmlのサポート</title>
      <link>https://blog.tack41.net/posts/2018/01/25_01/</link>
      <pubDate>Thu, 25 Jan 2018 00:00:00 +0900</pubDate>
      
      <guid>https://blog.tack41.net/posts/2018/01/25_01/</guid>
      <description>redmineで、markdown形式を使っていると、文字に色を付ける方法がない。 セキュリティの観点から、あえてすべてのhtmlタグをフィルタしているようだ&amp;hellip;
http://www.redmine.org/issues/20497
社内で運用している場合にセキュリティを気にして表現力が落ちてもしょうがないので、管理画面で切り替えるなどできるといいのだが&amp;hellip; 以下のサイトを参考に設定ファイルを直接書き換え、利用できるようになった。
http://redmine.jp/faq/wiki/use-html-tag-in-wiki/</description>
    </item>
    
    <item>
      <title>redmine, zabbixのActive Directory(LDAP)認証</title>
      <link>https://blog.tack41.net/posts/2017/11/24_01/</link>
      <pubDate>Fri, 24 Nov 2017 13:11:09 +0000</pubDate>
      
      <guid>https://blog.tack41.net/posts/2017/11/24_01/</guid>
      <description>redmine, zabbix共にActive DirectoryのLDAP機能を利用して認証の統合ができる。が、設定方法が引っかかった。
redmineはアカウントごとに認証方式の設定が可能。「管理」の「LDAP認証」にAD認証の設定をしたうえで、AD認証したいアカウントを作成して認証方法をADと指定してやればよい。
一方、zabbixは認証方法を変えるとそれが全ユーザーに適用される。ユーザーグループごとに認証方式が指定できるのだが、既定では「デフォルト」となっている。 認証を変えると、この「デフォルト」の認証方式が変わるので、結果として全ユーザーグループの認証方式が変更されてしまう。なので、「Zabbix administrators」グループの認証方式を事前にローカルに変更しておく必要がある。
だが、インストール時に作成される管理者アカウントでログインした状態だと、この「Zabbix administrators」グループの認証方式を変更できない。自分、及び自分のプライマリグループに関する情報は変更できないらしい。なので、別のユーザーグループを作成し、そこに所属するアカウントを作成。アカウントに「Zabbix特権管理者」権限を付与。そのアカウントでログインして「Zabbix administrators」グループの認証方式を「Zabbixデータベース内のユーザー情報」に変更する、という手順を踏む必要がある。 zabbixめんどい。</description>
    </item>
    
  </channel>
</rss>
