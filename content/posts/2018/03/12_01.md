---
title: "特定PCから特定サーバのみホスト名でUNCアクセスできない"
date: 2018-03-12 00:00:00 +0900
categories: [ tech ]
tags: [ windows ]
draft: false
---

社内情シスには常について回る、ファイルサーバーアクセスできない問題。
私も過去何度も経験しているし、WINS, SMBなどの知識もあるのでそんなに悩むことはここのところありませんでした。

しかし、今回は様子が異なり、以下のような症状。

* `\\SVRNAME` でアクセスできない。
* `\\SVRNAME.domain.name` のようなFQDNでもダメ
* 他のサーバに対しての`\\SVRNAME2` のアクセスは可能。ダメなのは1台のサーバのみ(?)
* `ping SVRNAME` は通る(!?)
* `\\IPアドレス` であれば該当のサーバでもアクセスできる
* NetBIOS over TCP/IPは有効になっている
* %WINDIR%\system32\drivers\etc にあるhosts, lmhosts にエントリはない

上から見ていって、1,2番目まではよくあるNetBIOSの名前解決エラーかと思ったのだが、3,4番目あたりからどうも様子が違う...

結果は、Windowsのコンパネ-[ユーザーアカウント]-[資格情報マネージャ]に、サーバー名で認証情報が登録されており、指定されたアカウントが無効となっていたため。
こんなところで指定しなくてもADログインすれば自動で認証するので、登録情報を削除したところアクセス可能となった。

Windows は奥が深い #いい意味ではない
